<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="theme-color" content="#0a0f1d">
  <title>Dick’s‑A‑Thon • Neon Snake — Epic</title>
  <style>
:root{
  --bg:#070a12; --panel:#0d1324; --grid:#11172d;
  --orange:#ff5a2a; --cyan:#00d1ff; --mustard:#ffd34e; --ketchup:#ff3b30;
  --pickle:#7CFFB2; --text:#e6f2ff; --gold:#ffd166;
}
*{box-sizing:border-box}
html,body{height:100%;background:radial-gradient(1200px 800px at 50% -10%, #0f1631, var(--bg));color:var(--text);font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial;}
body{margin:0;display:grid;place-items:center}
.frame{width:min(94vw,860px)}
.header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin:14px 0 10px}
.sign{font-weight:800;font-size:28px;letter-spacing:.4px;color:var(--orange);text-shadow:0 0 12px rgba(255,90,42,.8),0 0 28px rgba(255,90,42,.35)}
.sign small{display:block;color:var(--cyan);font-weight:700;font-size:12px;letter-spacing:2px;margin-top:-4px;text-shadow:0 0 10px rgba(0,209,255,.8),0 0 22px rgba(0,209,255,.35)}
.stats{display:flex;gap:10px;font-weight:700;flex-wrap:wrap}
.stat{background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));border:1px solid rgba(255,255,255,.06);padding:6px 10px;border-radius:12px}
.toggle{cursor:pointer}
.neon{color:var(--cyan);text-shadow:0 0 10px rgba(0,209,255,.9),0 0 24px rgba(0,209,255,.5)}
.orange{color:var(--orange);text-shadow:0 0 10px rgba(255,90,42,.9),0 0 24px rgba(255,90,42,.5)}
.mustard{color:var(--mustard);text-shadow:0 0 10px rgba(255,211,78,.9),0 0 24px rgba(255,211,78,.5)}
.panel{position:relative;background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));border:1px solid rgba(255,255,255,.06);border-radius:20px;padding:14px;box-shadow:0 10px 30px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.02)}
canvas{display:block;width:100%;height:auto;background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,.01)),radial-gradient(1400px 1000px at 50% 0%, rgba(0,209,255,.05), transparent 60%),var(--panel);border-radius:14px;touch-action:none}
.overlay{position:absolute;inset:14px;display:grid;place-items:center;border-radius:14px;}
.card{backdrop-filter: blur(6px); background: rgba(7,10,18,.55); border:1px solid rgba(255,255,255,.08); padding:22px;border-radius:18px; text-align:center; max-width:560px}
.title{font-size:26px;margin:0 0 10px; font-weight:900; letter-spacing:.6px}
.subtitle{opacity:.9;margin:0 0 12px}
.subtitle.small{font-size:13px}
.chips{display:flex;flex-wrap:wrap;justify-content:center;gap:6px;margin:8px 0 10px}
.chip{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.1);font-size:13px}
.chip i{width:12px;height:12px;border-radius:3px;display:inline-block;box-shadow:0 0 10px currentColor}
.buttons{display:flex;gap:10px;justify-content:center}
.btn{display:inline-block;padding:12px 18px;border-radius:999px;border:0;background:radial-gradient(120% 120% at 50% 0, #ff7b55, var(--orange));color:white;font-weight:800;letter-spacing:.4px;cursor:pointer;box-shadow:0 0 14px rgba(255,90,42,.7), inset 0 -2px 0 rgba(0,0,0,.2)}
.btn.ghost{background:rgba(255,255,255,.06);box-shadow:none;border:1px solid rgba(255,255,255,.1)}
.tip{margin:8px 0 4px; font-size:13px; opacity:.9}
.controls{display:grid;grid-template-columns:repeat(3,64px);grid-template-rows:repeat(3,64px);gap:8px;margin:10px auto 6px;justify-content:center;opacity:.98}
.pad{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);box-shadow:inset 0 0 0 1px rgba(255,255,255,.04);border-radius:12px;display:grid;place-items:center;font-weight:900}
.pad span{filter:drop-shadow(0 0 8px rgba(0,209,255,.8))}
.pad.blank{opacity:.25}
@media (max-width:560px){.header{flex-direction:column;align-items:flex-start}.controls{grid-template-columns:repeat(3,72px);grid-template-rows:repeat(3,72px)}}

</style>
  <meta name="description" content="A neon, 80s‑arcade Snake for Dick’s‑A‑Thon. Swipe or use the D‑pad. Retro SFX & music, power‑ups, wrap walls, and more.">
</head>
<body>
  <div class="frame">
    <header class="header">
      <div class="brand sign">Dick’s <span class="neon">A‑Thon</span><small>NEON SNAKE — EPIC</small></div>
      <div class="stats">
        <div class="stat">Score: <span id="score" class="orange">0</span></div>
        <div class="stat">High: <span id="high" class="neon">0</span></div>
        <div class="stat">Speed: <span id="speed" class="neon">1x</span></div>
        <button id="sfxToggle" class="stat toggle">SFX: <span id="sfxState" class="orange">On</span></button>
        <button id="musicToggle" class="stat toggle">Music: <span id="musicState">Off</span></button>
        <button id="wrapToggle" class="stat toggle">Walls: <span id="wrapState">Solid</span></button>
      </div>
    </header>

    <main class="panel">
      <canvas id="game" width="900" height="1125" aria-label="Dick’s‑A‑Thon Neon Snake"></canvas>

      <!-- Start overlay -->
      <section id="startOverlay" class="overlay" role="dialog" aria-modal="true">
        <div class="card">
          <h1 class="title orange">NEON SNAKE — EPIC</h1>
          <p class="subtitle">Swipe or use the on‑screen pad. Collect <b class="orange">burgers</b>, <b class="neon">fries</b>, and <b class="mustard">shakes</b>. Avoid yourself & hazards.</p>
          <div class="chips">
            <span class="chip"><i style="background:var(--orange)"></i> Burger +10</span>
            <span class="chip"><i style="background:var(--cyan)"></i> Fries +12</span>
            <span class="chip"><i style="background:var(--mustard)"></i> Shake +20 (+2)</span>
            <span class="chip"><i style="background:var(--gold)"></i> Golden Fry x2 score (10s)</span>
            <span class="chip"><i style="background:var(--ketchup)"></i> Ketchup splat = wall</span>
          </div>
          <p class="subtitle small">Controls: Arrow keys/WASD • Tap ⏸ to pause • M to mute SFX • N to toggle music • W to toggle wrap walls</p>
          <div class="buttons">
            <button class="btn" id="startBtn">Tap to Start</button>
            <button class="btn ghost" id="autoBtn">Auto‑Start (no audio)</button>
          </div>
        </div>
      </section>

      <!-- Game over overlay -->
      <section id="gameOverOverlay" class="overlay" style="display:none">
        <div class="card">
          <h2 class="title neon">Run Over</h2>
          <p class="subtitle">Score: <b id="finalScore" class="orange">0</b></p>
          <div class="buttons">
            <button class="btn" id="againBtn">Run It Back</button>
            <button class="btn ghost" id="menuBtn">Menu</button>
          </div>
        </div>
      </section>
    </main>

    <div class="tip">Swipe to steer • On‑screen pad below • Space to pause • SFX/Music toggles above</div>

    <!-- Controls under canvas -->
    <nav class="controls" id="controls">
      <div class="pad blank"></div>
      <button class="pad" data-dir="up" aria-label="Up"><span>▲</span></button>
      <div class="pad blank"></div>
      <button class="pad" data-dir="left" aria-label="Left"><span>◀</span></button>
      <button class="pad" data-dir="pause" aria-label="Pause"><span>⏸</span></button>
      <button class="pad" data-dir="right" aria-label="Right"><span>▶</span></button>
      <div class="pad blank"></div>
      <button class="pad" data-dir="down" aria-label="Down"><span>▼</span></button>
      <div class="pad blank"></div>
    </nav>
  </div><script>
/* ---- SFX (inline) ---- */
export class SFX {
  constructor(){ this.enabled=true; this.musicOn=false; this.ctx=null; this.master=null; this.musicNodes=[]; }
  ensure(){ if(!this.ctx){ this.ctx=new (window.AudioContext||window.webkitAudioContext)(); this.master=this.ctx.createGain(); this.master.gain.value=0.22; this.master.connect(this.ctx.destination);} if(this.ctx.state==='suspended') this.ctx.resume(); }
  toggle(){ this.enabled=!this.enabled; return this.enabled; }
  toggleMusic(){ this.musicOn=!this.musicOn; if(this.musicOn) this.startMusic(); else this.stopMusic(); return this.musicOn; }
  tone({freq=440,dur=.12,type='square',vol=.8,attack=.005,decay=.06}){ if(!this.enabled) return; this.ensure(); const t=this.ctx.currentTime; const o=this.ctx.createOscillator(); const g=this.ctx.createGain(); o.type=type; o.frequency.setValueAtTime(freq,t); g.gain.setValueAtTime(0,t); g.gain.linearRampToValueAtTime(vol,t+attack); g.gain.exponentialRampToValueAtTime(0.0001,t+attack+decay+dur); o.connect(g); g.connect(this.master); o.start(t); o.stop(t+dur+attack+decay+.02); }
  noise({dur=.08,vol=.5}){ if(!this.enabled) return; this.ensure(); const sr=this.ctx.sampleRate; const b=this.ctx.createBuffer(1,sr*dur,sr); const d=b.getChannelData(0); for(let i=0;i<d.length;i++){ d[i]=(Math.random()*2-1)*Math.pow(1-i/d.length,2);} const s=this.ctx.createBufferSource(); s.buffer=b; const g=this.ctx.createGain(); g.gain.value=vol; s.connect(g); g.connect(this.master); s.start(); }
  eat(k){ if(k==='burger'){ this.tone({freq:220,type:'square',dur:.09,vol:.9}); this.tone({freq:330,type:'square',dur:.07,vol:.7}); } else if(k==='fries'){ this.tone({freq:523.25,type:'triangle',dur:.06,vol:.7}); setTimeout(()=>this.tone({freq:659.25,type:'triangle',dur:.06,vol:.7}),60);} else if(k==='shake'){ this.tone({freq:392,type:'sawtooth',dur:.1,vol:.65}); setTimeout(()=>this.tone({freq:523.25,type:'sawtooth',dur:.12,vol:.6}),40); this.noise({dur:.05,vol:.35}); } else if(k==='gold'){ this.tone({freq:880,type:'square',dur:.08,vol:.7}); this.tone({freq:1175,type:'square',dur:.08,vol:.6}); } }
  speedUp(){ [440,494,554,659,784].forEach((f,i)=> setTimeout(()=> this.tone({freq:f,type:'square',dur:.06,vol:.6}), i*55)); }
  start(){ [261.63,329.63,392,523.25].forEach((f,i)=> setTimeout(()=> this.tone({freq:f,type:'square',dur:.09,vol:.7}), i*100)); }
  pause(){ this.tone({freq:200,type:'triangle',dur:.05,vol:.5}); }
  unpause(){ this.tone({freq:400,type:'triangle',dur:.05,vol:.6}); }
  gameOver(){ [392,329.63,261.63].forEach((f,i)=> setTimeout(()=> this.tone({freq:f,type:'square',dur:.12,vol:.7}), i*140)); }
  startMusic(){ this.ensure(); this.stopMusic(); const t0=this.ctx.currentTime; const tempo=120; const beat=60/tempo; const seq=[{f:261.63,d:2},{f:329.63,d:2},{f:392,d:2},{f:523.25,d:2}]; for(let bar=0; bar<8; bar++){ seq.forEach((n,i)=>{ const t=t0+(bar*seq.length+i)*beat*0.5; const o=this.ctx.createOscillator(); o.type='square'; o.frequency.setValueAtTime(n.f,t); const g=this.ctx.createGain(); g.gain.setValueAtTime(0,t); g.gain.linearRampToValueAtTime(0.15,t+0.02); g.gain.exponentialRampToValueAtTime(0.0001, t+n.d*beat*0.45); o.connect(g); g.connect(this.master); o.start(t); o.stop(t+n.d*beat*0.5+0.05); this.musicNodes.push(o,g); }); } this.musicTimer=setInterval(()=>{ if(this.musicOn) this.startMusic(); }, beat*seq.length*8*1000*0.5); }
  stopMusic(){ if(this.musicTimer){ clearInterval(this.musicTimer); this.musicTimer=null; } this.musicNodes.forEach(n=>{ try{ n.disconnect(); if(n.stop) n.stop(); }catch(e){} }); this.musicNodes.length=0; }
}


/* ---- Game (inline) ---- */
(()=>{
  const canvas=document.getElementById('game'); const ctx=canvas.getContext('2d');
  const scoreEl=document.getElementById('score'); const highEl=document.getElementById('high'); const speedEl=document.getElementById('speed');
  const sfxToggleEl=document.getElementById('sfxToggle'); const sfxStateEl=document.getElementById('sfxState'); const musicToggleEl=document.getElementById('musicToggle'); const musicStateEl=document.getElementById('musicState'); const wrapToggleEl=document.getElementById('wrapToggle'); const wrapStateEl=document.getElementById('wrapState');
  const startOverlay=document.getElementById('startOverlay'); const gameOverOverlay=document.getElementById('gameOverOverlay'); const finalScoreEl=document.getElementById('finalScore'); const startBtn=document.getElementById('startBtn'); const againBtn=document.getElementById('againBtn'); const menuBtn=document.getElementById('menuBtn'); const autoBtn=document.getElementById('autoBtn');

  const store={ get(k,d){try{const v=localStorage.getItem(k); return v==null?d:JSON.parse(v);}catch(e){return d;}}, set(k,v){try{localStorage.setItem(k,JSON.stringify(v));}catch(e){} } };
  const settings=store.get('dat_settings',{sfx:true,music:false,wrap:false,vibrate:true});
  const sfx=new SFX(); sfx.enabled=settings.sfx;
  function updateToggles(){ sfxStateEl.textContent=sfx.enabled?'On':'Off'; musicStateEl.textContent=settings.music?'On':'Off'; wrapStateEl.textContent=settings.wrap?'Wrap':'Solid'; }
  updateToggles();

  function fit(){ const dpr=Math.max(1,Math.min(2,window.devicePixelRatio||1)); const w=Math.min(860, document.querySelector('.panel').clientWidth-28); const h=Math.round(w*1.25); canvas.style.width=w+'px'; canvas.style.height=h+'px'; canvas.width=Math.round(w*dpr); canvas.height=Math.round(h*dpr); ctx.setTransform(dpr,0,0,dpr,0,0); }
  addEventListener('resize',fit); fit();

  const COLS=24, ROWS=32; function cell(){ return {tw:canvas.clientWidth/COLS, th:canvas.clientHeight/ROWS}; }
  let snake, dir, nextDir, foods, obstacles, score, growth, running, tickMs, lastTick, paused, speedLevel, eatenCount, doubleScoreUntil;
  const HI='dat_snake_hi';

  function init(){ const midX=(COLS/3)|0, midY=(ROWS/2)|0; snake=[{x:midX,y:midY},{x:midX-1,y:midY},{x:midX-2,y:midY}]; dir={x:1,y:0}; nextDir={x:1,y:0}; foods=[]; obstacles=[]; score=0; growth=0; eatenCount=0; speedLevel=1; doubleScoreUntil=0; tickMs=150; lastTick=0; paused=false; running=true; spawnFood(); spawnFood(); updateHUD(); loop(performance.now()); }

  function randEmpty(){ let p,bad; do{ p={x:(Math.random()*COLS)|0,y:(Math.random()*ROWS)|0}; bad=snake.some(s=>s.x===p.x&&s.y===p.y)||foods.some(f=>f.x===p.x&&f.y===p.y)||obstacles.some(o=>o.x===p.x&&o.y===p.y);}while(bad); return p; }
  function spawnFood(){ const pos=randEmpty(); const r=Math.random(); let item; if(r<0.05){ item={kind:'gold',color:get('--gold'),points:0,grow:0}; } else if(r<0.45){ item={kind:'burger',color:get('--orange'),points:10,grow:1}; } else if(r<0.85){ item={kind:'fries',color:get('--cyan'),points:12,grow:1}; } else { item={kind:'shake',color:get('--mustard'),points:20,grow:2}; } foods.push({...item,...pos}); }
  function spawnObstacle(){ const pos=randEmpty(); obstacles.push({x:pos.x,y:pos.y,ttl:(ROWS*0.9)|0}); }
  function updateHUD(){ scoreEl.textContent=score; const hi=Math.max(store.get(HI,0),score); store.set(HI,hi); highEl.textContent=hi; speedEl.textContent=speedLevel+'x'; }

  addEventListener('keydown',e=>{ const k=e.key.toLowerCase(); if(k===' '){ paused=!paused; paused?sfx.pause():sfx.unpause(); } else if(['arrowup','w'].includes(k)) turn(0,-1); else if(['arrowdown','s'].includes(k)) turn(0,1); else if(['arrowleft','a'].includes(k)) turn(-1,0); else if(['arrowright','d'].includes(k)) turn(1,0); else if(k==='m'){ settings.sfx=sfx.toggle(); store.set('dat_settings',settings); updateToggles(); } else if(k==='n'){ settings.music=!settings.music; store.set('dat_settings',settings); updateToggles(); settings.music?sfx.startMusic():sfx.stopMusic(); } else if(k==='w'){ settings.wrap=!settings.wrap; store.set('dat_settings',settings); updateToggles(); } });
  document.querySelectorAll('.pad').forEach(btn=>btn.addEventListener('click',()=>{ const d=btn.getAttribute('data-dir'); if(d==='pause'){ paused=!paused; paused?sfx.pause():sfx.unpause(); return; } if(d==='up') turn(0,-1); if(d==='down') turn(0,1); if(d==='left') turn(-1,0); if(d==='right') turn(1,0); }));
  let start=null; canvas.addEventListener('pointerdown',e=>{ start={x:e.clientX,y:e.clientY}; }); canvas.addEventListener('pointerup',e=>{ if(!start) return; const dx=e.clientX-start.x,dy=e.clientY-start.y; const ax=Math.abs(dx),ay=Math.abs(dy); if(Math.max(ax,ay)>18){ if(ax>ay){ dx>0?turn(1,0):turn(-1,0);} else { dy>0?turn(0,1):turn(0,-1);} } else { paused=!paused; paused?sfx.pause():sfx.unpause(); } start=null; });

  sfxToggleEl.addEventListener('click',()=>{ settings.sfx=sfx.toggle(); store.set('dat_settings',settings); updateToggles(); });
  musicToggleEl.addEventListener('click',()=>{ settings.music=!settings.music; store.set('dat_settings',settings); updateToggles(); settings.music?sfx.startMusic():sfx.stopMusic(); });
  wrapToggleEl.addEventListener('click',()=>{ settings.wrap=!settings.wrap; store.set('dat_settings',settings); updateToggles(); });

  startBtn.addEventListener('click',()=>{ try{sfx.ensure();}catch(e){} sfx.start(); if(settings.music) sfx.startMusic(); startOverlay.style.display='none'; init(); });
  autoBtn.addEventListener('click',()=>{ sfx.enabled=false; settings.sfx=false; store.set('dat_settings',settings); updateToggles(); startOverlay.style.display='none'; init(); });
  againBtn.addEventListener('click',()=>{ gameOverOverlay.style.display='none'; init(); });
  menuBtn.addEventListener('click',()=>{ gameOverOverlay.style.display='none'; startOverlay.style.display='grid'; });

  function loop(t){ if(!running) return; requestAnimationFrame(loop); if(paused){ draw(); return; } if(t-lastTick<tickMs){ draw(); return; } lastTick=t; step(); draw(); }
  function step(){ dir=nextDir; let hx=snake[0].x+dir.x, hy=snake[0].y+dir.y; if(settings.wrap){ hx=(hx+COLS)%COLS; hy=(hy+ROWS)%ROWS; } else { if(hx<0||hy<0||hx>=COLS||hy>=ROWS) return over(); } if(snake.some(s=>s.x===hx&&s.y===hy)) return over(); if(obstacles.some(o=>o.x===hx&&o.y===hy)) return over(); snake.unshift({x:hx,y:hy}); const idx=foods.findIndex(f=>f.x===hx&&f.y===hy); if(idx>=0){ const f=foods[idx]; foods.splice(idx,1); if(f.kind==='gold'){ doubleScoreUntil=performance.now()+10000; sfx.eat('gold'); } else { let pts=f.points; if(performance.now()<doubleScoreUntil) pts*=2; score+=pts; growth+=f.grow; eatenCount++; sfx.eat(f.kind); if(eatenCount%4===0&&tickMs>70){ tickMs=Math.max(55,tickMs-12); speedLevel=Math.min(5,speedLevel+1); sfx.speedUp(); } if(Math.random()<0.25) spawnObstacle(); } spawnFood(); updateHUD(); try{ if(navigator.vibrate) navigator.vibrate(12);}catch(e){} } if(growth>0) growth--; else snake.pop(); obstacles.forEach(o=>o.ttl--); obstacles=obstacles.filter(o=>o.ttl>0); }
  function over(){ running=false; finalScoreEl.textContent=score; updateHUD(); sfx.gameOver(); setTimeout(()=>{ gameOverOverlay.style.display='grid'; },250); try{ if(navigator.vibrate) navigator.vibrate([30,50,30]); }catch(e){} }

  function draw(){ const {tw,th}=cell(); ctx.clearRect(0,0,canvas.width,canvas.height); ctx.save(); ctx.lineWidth=1; ctx.strokeStyle='rgba(255,255,255,.05)'; for(let c=0;c<=COLS;c++){ ctx.beginPath(); ctx.moveTo(c*tw+.5,0); ctx.lineTo(c*tw+.5,ROWS*th); ctx.stroke(); } for(let r=0;r<=ROWS;r++){ ctx.beginPath(); ctx.moveTo(0,r*th+.5); ctx.lineTo(COLS*tw,r*th+.5); ctx.stroke(); } ctx.restore(); obstacles.forEach(o=>{ ctx.save(); ctx.shadowBlur=10; ctx.shadowColor=get('--ketchup'); ctx.fillStyle=get('--ketchup'); rr(o.x*tw+tw*.12,o.y*th+th*.12,tw*.76,th*.76,Math.min(tw,th)*.2,true,false); ctx.restore(); }); foods.forEach(f=>food(f.x,f.y,f.kind,f.color,tw,th)); ctx.save(); ctx.shadowBlur=14; ctx.shadowColor=get('--cyan'); for(let i=snake.length-1;i>=0;i--){ const s=snake[i]; const x=s.x*tw, y=s.y*th; const r=Math.min(tw,th)*.32; const g=ctx.createLinearGradient(x,y,x+tw,y+th); g.addColorStop(0,get('--cyan')); g.addColorStop(1,get('--orange')); ctx.fillStyle=g; rr(x+tw*.1,y+th*.1,tw*.8,th*.8,r,true,false); } const h=snake[0]; ctx.shadowBlur=22; ctx.shadowColor=get('--orange'); rr(h.x*tw+tw*.1,h.y*th+th*.1,tw*.8,th*.8,Math.min(tw,th)*.34,true,false); ctx.restore(); sign(); if(performance.now()< (doubleScoreUntil||0)){ ctx.save(); ctx.globalAlpha=0.2+0.2*Math.sin(performance.now()/120); ctx.fillStyle=get('--gold'); ctx.fillRect(0,0,canvas.clientWidth,4); ctx.restore(); } }
  function food(cx,cy,kind,color,tw,th){ const x=cx*tw,y=cy*th; ctx.save(); ctx.translate(x+tw/2,y+th/2); ctx.shadowColor=color; ctx.shadowBlur=18; ctx.lineWidth=2; if(kind==='burger'){ ctx.fillStyle=color; circ(0,-th*0.08,Math.min(tw,th)*0.36); ctx.fillStyle=get('--ketchup'); circ(0,th*0.1,Math.min(tw,th)*0.20); } else if(kind==='fries'){ ctx.fillStyle=color; rr(-tw*0.28,-th*0.25,tw*0.56,th*0.5,8,true,false); ctx.fillStyle=get('--mustard'); for(let i=0;i<5;i++){ ctx.fillRect(-tw*0.25+i*(tw*0.12),-th*0.42,tw*0.06,th*0.24);} } else if(kind==='shake'){ ctx.fillStyle=color; rr(-tw*0.22,-th*0.12,tw*0.44,th*0.44,8,true,false); ctx.fillStyle=get('--ketchup'); ctx.fillRect(-2,-th*0.32,4,th*0.20);} else { ctx.fillStyle=color; circ(0,0,Math.min(tw,th)*0.28); ctx.strokeStyle='white'; ctx.lineWidth=2; ctx.beginPath(); ctx.moveTo(-tw*0.18,0); ctx.lineTo(tw*0.18,0); ctx.stroke(); } ctx.restore(); }
  function sign(){ const w=canvas.clientWidth,h=canvas.clientHeight,x=w-220,y=h-70; ctx.save(); ctx.shadowBlur=18; ctx.lineWidth=3; ctx.translate(x,y); ctx.strokeStyle=get('--cyan'); rr(0,0,200,56,12,false,true); ctx.font='800 22px system-ui, -apple-system, Segoe UI, Roboto'; ctx.shadowColor=get('--orange'); ctx.fillStyle=get('--orange'); ctx.fillText("Dick's",14,24); ctx.shadowColor=get('--cyan'); ctx.fillStyle=get('--cyan'); ctx.font='700 16px system-ui, -apple-system, Segoe UI, Roboto'; ctx.fillText('A‑THON',16,44); ctx.restore(); }
  function get(v){ return getComputedStyle(document.documentElement).getPropertyValue(v).trim(); }
  function rr(x,y,w,h,r,fill=true,stroke=false){ const R=Math.min(r,w/2,h/2); ctx.beginPath(); ctx.moveTo(x+R,y); ctx.arcTo(x+w,y,x+w,y+h,R); ctx.arcTo(x+w,y+h,x,y+h,R); ctx.arcTo(x,y+h,x,y,R); ctx.arcTo(x,y,x+w,y,R); if(fill) ctx.fill(); if(stroke) ctx.stroke(); }
  function circ(x,y,rad){ ctx.beginPath(); ctx.arc(x,y,rad,0,Math.PI*2); ctx.fill(); }
  function turn(x,y){ if((x===-dir.x&&y===-dir.y)||(x===dir.x&&y===dir.y)) return; nextDir={x,y}; }

  if('serviceWorker' in navigator){ addEventListener('load',()=>{ navigator.serviceWorker.register('./sw.js').catch(()=>{}); }); }
  const url=new URL(location.href); if(url.searchParams.get('auto')==='1'){ startOverlay.style.display='none'; init(); }
})();
</script>
</body>
</html>
